<form class="form-horizontal" id="form" action = "__SELF__">
    {notempty name='detail'}<input type='hidden' value='{$detail.org_id}' name='org_id'/>{/notempty}
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span></button>
        <h4 class="modal-title">{$title}</h4>
    </div>
    <div class="modal-body">
        {eq name="Request.action" value="add"}
        <div class="panel panel-default">
            <div class="panel-heading">子单位信息</div>
            <div class="panel-body">{/eq}
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">单位名</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="name" placeholder="单位名" type="text" value='{$detail.name|default=""}'
                                pattern="^[\u4e00-\u9fa5\dA-Za-z_\-]{1,30}$"
                                data-pattern-error="只允许汉字、字母、数字和下划线_及破折号-"
                                data-remote="{empty name='detail'}{:url('organization/_exist')}{else /}{:url('organization/_exist', 'org_id='.$detail['org_id'])}{/empty}"
                                data-remote-error="该单位名已存在"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">简称</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="abbr" placeholder="简称" type="text" value='{$detail.abbr|default=""}'
                                pattern="^[\u4e00-\u9fa5\dA-Za-z_\-]{1,30}$"
                                data-pattern-error="只允许汉字、字母、数字和下划线_及破折号-"
                                data-remote="{empty name='detail'}{:url('organization/_exist')}{else /}{:url('organization/_exist', 'org_id='.$detail['org_id'])}{/empty}"
                                data-remote-error="该简称已存在"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-2 control-label">地址</label>
                    <div class="col-sm-10">
                        <input class="form-control" name="address" placeholder="地址" type="text" value='{$detail.address|default=""}'>
                    </div>
                    {eq name="Request.action" value="add"}
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">子单位管理员信息</div>
            <div class="panel-body">
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">用户名</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="username" placeholder="用户名" type="text"
                                pattern="^[\dA-Za-z_\-]{3,20}$"
                                data-pattern-error="只允许字母和数字，下划线_ 及破折号-，长度最少3位"
                                data-remote="{:url('system/user/_exist')}"
                                data-remote-error="该用户名已存在"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">密码</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" id="password" name="password" placeholder="输入密码" type="password"
                                pattern="^\S{6,}$"
                                data-pattern-error="长度最少6位"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">确认密码</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="password_confirm" placeholder="重复输入密码" type="password"
                                data-match="#password"
                                data-match-error="两次输入不一致"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">手机号</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="phone" placeholder="输入手机号" type="text"
                                pattern="^13[\d]{9}$|^14[5,7]{1}\d{8}$|^15[^4]{1}\d{8}$|^17[0,6,7,8]{1}\d{8}$|^18[\d]{9}$"
                                data-pattern-error="手机号格式不正确！"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group has-feedback">
                    <label  class="col-sm-2 control-label">email</label>
                    <div class="col-sm-10">
                        <input
                                class="form-control" name="email" placeholder="输入email" type="text"
                                pattern="^([a-zA-Z0-9_\.\-])+[@](([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$"
                                data-pattern-error="E-mail格式不正确！"
                                required
                        >
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
            </div>
        </div>{/eq}
    </div>
    <div class="modal-footer">
        <button type="reset" class="btn btn-default">重置</button>
        <button type="submit" class="btn btn-primary">提交</button>
    </div>
</form>